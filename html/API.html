<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal Data Penduduk Desa Simduadi</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <style>
        /* Gaya CSS untuk tata letak */
    </style>
</head>
<body>

    <div class="container">
        <div class="sidebar">
            <!-- Sidebar content -->
        </div>

        <div class="content">
            <div class="main-content">
                <h2>Form Data Penduduk</h2>
                <div class="steps">
                    <div class="step"><i class="fas fa-user"></i><span>Biodata</span></div>
                    <div class="step active"><i class="fas fa-home"></i><span>Alamat</span></div>
                    <div class="step"><i class="fas fa-file-alt"></i><span>Dokumen Pendukung</span></div>
                </div>

                <!-- Form Input -->
                <div class="form-container">
                    <div class="form-group">
                        <label for="alamat-lengkap">Alamat Lengkap</label>
                        <input id="alamat-lengkap" placeholder="Masukkan Alamat Lengkap" type="text"/>
                    </div>

                    <!-- Dropdown Provinsi -->
                    <div class="form-group">
                        <label for="provinsi">Provinsi</label>
                        <select id="provinsi" onchange="loadRegencies()">
                            <option value="">Pilih Provinsi</option>
                        </select>
                    </div>

                    <!-- Dropdown Kabupaten -->
                    <div class="form-group">
                        <label for="kabupaten-kota">Kabupaten/Kota</label>
                        <select id="kabupaten-kota" onchange="loadDistricts()">
                            <option value="">Pilih Kabupaten/Kota</option>
                        </select>
                    </div>

                    <!-- Dropdown Kecamatan -->
                    <div class="form-group">
                        <label for="kecamatan">Kecamatan</label>
                        <select id="kecamatan" onchange="loadVillages()">
                            <option value="">Pilih Kecamatan</option>
                        </select>
                    </div>

                    <!-- Dropdown Desa -->
                    <div class="form-group">
                        <label for="desa-kelurahan">Desa/Kelurahan</label>
                        <select id="desa-kelurahan">
                            <option value="">Pilih Desa/Kelurahan</option>
                        </select>
                    </div>

                    <div class="form-buttons">
                        <button class="btn-back">Kembali</button>
                        <button class="btn-next" onclick="goNext(event)">Selanjutnya</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Memuat data provinsi
        function loadProvinces() {
            fetch('https://api.allorigins.win/raw?url=https://emsifa.github.io/api-wilayah-indonesia/api/provinces.json')
                .then(response => response.json())
                .then(data => {
                    console.log('Data Provinsi:', data);
                    const provinceSelect = document.getElementById('provinsi');
                    data.forEach(province => {
                        const option = document.createElement('option');
                        option.value = province.id;
                        option.text = province.name;
                        provinceSelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Terjadi masalah dengan pengambilan data:', error));
        }

        // Memanggil loadProvinces saat halaman dimuat
        window.onload = loadProvinces;

        // Memuat daftar Kabupaten berdasarkan Provinsi yang Dipilih
        function loadRegencies() {
            const provinceId = document.getElementById('provinsi').value;
            if (!provinceId) return;

            // Memanggil API untuk daftar kabupaten
            fetch(`https://api.allorigins.win/raw?url=https://emsifa.github.io/api-wilayah-indonesia/api/regencies/${provinceId}.json`)
                .then(response => response.json())
                .then(data => {
                    const regencySelect = document.getElementById('kabupaten-kota');
                    regencySelect.innerHTML = '<option value="">Pilih Kabupaten/Kota</option>'; // Reset
                    data.forEach(regency => {
                        const option = document.createElement('option');
                        option.value = regency.id;
                        option.text = regency.name;
                        regencySelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Error loading regencies:', error));
        }

        // Memuat daftar Kecamatan berdasarkan Kabupaten yang Dipilih
        function loadDistricts() {
            const regencyId = document.getElementById('kabupaten-kota').value;
            if (!regencyId) return;

            fetch(`https://api.allorigins.win/raw?url=https://emsifa.github.io/api-wilayah-indonesia/api/districts/${regencyId}.json`)
                .then(response => response.json())
                .then(data => {
                    const districtSelect = document.getElementById('kecamatan');
                    districtSelect.innerHTML = '<option value="">Pilih Kecamatan</option>';
                    data.forEach(district => {
                        const option = document.createElement('option');
                        option.value = district.id;
                        option.text = district.name;
                        districtSelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Error loading districts:', error));
        }

        // Memuat daftar Desa/Kelurahan berdasarkan Kecamatan yang Dipilih
        function loadVillages() {
            const districtId = document.getElementById('kecamatan').value;
            if (!districtId) return;

            fetch(`https://api.allorigins.win/raw?url=https://emsifa.github.io/api-wilayah-indonesia/api/villages/${districtId}.json`)
                .then(response => response.json())
                .then(data => {
                    const villageSelect = document.getElementById('desa-kelurahan');
                    villageSelect.innerHTML = '<option value="">Pilih Desa/Kelurahan</option>';
                    data.forEach(village => {
                        const option = document.createElement('option');
                        option.value = village.id;
                        option.text = village.name;
                        villageSelect.appendChild(option);
                    });
                })
                .catch(error => console.error('Error loading villages:', error));
        }

        // Fungsi untuk melanjutkan ke halaman berikutnya
        function goNext(event) {
            event.preventDefault();
            window.location.href = "dokumen_pendukung.html"; // Ganti dengan URL tujuan
        }
    </script>

</body>
</html>
